# Fargelegging

Vi skal ta en liten avstikker til f칮r vi begynner p친 selve oppgaven. Vi skal i
dette kapittelet se litt p친 hvordan vi kan bruke `rich` for 친 gj칮re
kommandolinje-verkt칮yet v친rt litt enklere for 칮ynene.

::: {.column-margin}
> Kom arbeidslyst og treng deg p친 -her skal du motstand finne!
>
> - Solan Gundersen
:::

Vi skal ikke bruke alt for lang tid p친 `rich`, da det sikkert er mer interessant
친 finne ut av selv, men vi skal vise litt av fordelen med `rich` over vanlig
`print`.

## Bruke `rich.print`

Den enkleste m친ten 친 bruke `rich` p친 er 친 importere `print` fra `rich` og bruke
denne metoden istedenfor den vanlige `print`.

Vi begynner med programmet vi endte opp med etter forrige kapittel:

```python
import typer

app = typer.Typer()


@app.command()
def main(name: str, formal: bool = False) -> None:
    """Si hei til det gitte navnet"""
    if formal:
        print(f"Hallo {name}")
    else:
        print(f"Hei {name}!")


if __name__ == "__main__":
    app()
```

La oss f칮rst importere `rich` og se om det ble anderledes.

칒verst i verkt칮yet kan vi endre avhengigheter slik at det blir som f칮lger:

```python
import typer
from rich import print

app = typer.Typer()
```

Dette gj칮r at linjene v친re med `print` endres fra Python sin vanlige metode til
`rich` sin utskrift. Vi kan deretter kj칮re verkt칮yet som vanlig.

```bash
uv run hello.py NAV
```

Det gjorde ikke s친 stor forskjell, men la oss raskt se hva vi kan f친 til med
`rich`.

### Skrive ut emoji 游

La oss legge til en emoji 游꿜. I `rich` kan vi bruke [omtrent samme
syntaks som i Slack](https://rich.readthedocs.io/en/stable/markup.html#emoji).
Siden en 游꿜 er litt formel s친 legger vi den til i formell utskrift.

Vi endrer utskriften til f칮lgende:

```python
@app.command()
def main(name: str, formal: bool = False) -> None:
    """Si hei til det gitte navnet"""
    if formal:
        print(f"Hallo {name} :top_hat:")
    else:
        print(f"Hei {name}!")
```

Husk 친 kj칮re med `--formal`.

### Skrive ut i farger

N친 ble jo `--formal` utskriften veldig fin, men la oss ogs친 gj칮re noe for mannen
i gata. Vi legger til litt farger og uthevning!

::: {.column-margin}
Det er jo vanlige folks tur...

(Skrevet i 2024)
:::

[`rich` har st칮tte for mye
forskjellig](https://rich.readthedocs.io/en/stable/markup.html#syntax) s친 her er
det bare 친 sl친 seg l칮s.

Vi endrer igjen funksjonen v친r:

```python
@app.command()
def main(name: str, formal: bool = False) -> None:
    """Si hei til det gitte navnet"""
    if formal:
        print(f"Hallo {name} :top_hat:")
    else:
        print(f"Hei [bold magenta]{name}[/]!")
```

Det ble superflott!

## Bruke `rich.console.Console`

Selv om det er veldig praktisk 친 bare importere `from rich import print` s친 er
det ofte bedre 친 opprette en `Console` som `rich` kan bruke. Dette gir litt
flere kapabiliteter, som 친 skrive ut tabeller samt 친 vise en
fremdriftsindikator.

La oss skrive om verkt칮yet v친rt til 친 bruke `rich.console.Console` og deretter
leke oss litt med en tabell.

For 친 bruke `Console` er det ofte greit 친 bare lage en global variabel som vi
kan benytte oss til 친 skrive ut med. Vi fortsetter p친 programmet over.

```python
import typer
from rich import print
from rich.console import Console # <1>

app = typer.Typer()
console = Console() # <2>


@app.command()
def main(name: str, formal: bool = False) -> None:
    """Si hei til det gitte navnet"""
    if formal:
        print(f"Hallo {name} :top_hat:")
    else:
        print(f"Hei [bold magenta]{name}[/]!")


if __name__ == "__main__":
    app()
```
1. Vi importerer fra `rich.console`
2. Opprett en global instans

Merk at forel칮pig har vi ikke begynt 친 bruke `console` instansen v친r. Det gj칮r
vi ved 친 bytte ut `print` med `console.print`.

```python
@app.command()
def main(name: str, formal: bool = False) -> None:
    """Si hei til det gitte navnet"""
    if formal:
        console.print(f"Hallo {name} :top_hat:")
    else:
        console.print(f"Hei [bold magenta]{name}[/]!")
```

::: {.column-margin}
Vi kan n친 ogs친 fjerne linjen med

```python
from rich import print
```
:::

Verkt칮yet v친rt burde ikke ha endret oppf칮rsel, men vi har n친 mulighet til 친
gj칮re enda mer med `rich`.

### Skrive ut en tabell

La oss bruke den nye kraften til 친 skrive ut avansert formatering, [en
tabell](https://rich.readthedocs.io/en/stable/tables.html)!

::: {.callout-tip}
## Oppgave
For at ikke tabellen skal skrives ut hver gang vi kaller p친 verkt칮yet v친rt. Legg
til et nytt valg som bestemmer om tabellen skal skrives ut eller ikke.
:::

::: {.callout-note collapse="true"}
## L칮sningsforslag
```python
@app.command()
def main(name: str, formal: bool = False, summary: bool = False) -> None: # <1>
    """Si hei til det gitte navnet"""
    if formal:
        console.print(f"Hallo {name} :top_hat:")
    else:
        console.print(f"Hei [bold magenta]{name}[/]!")
    if summary: # <2>
        pass
```
1. Legg til et nytt valgfritt `bool` parameter p친 metoden v친r (`summary: bool = False`).
2. Skriv ut tabellen bare n친r `summary` er sann.
:::

For 친 ikke bruke for mye tid p친 친 lage en tabell l친ner vi en allerede eksisterende.

```python
import typer
from rich.console import Console
from rich.table import Table

app = typer.Typer()
console = Console()


def create_table() -> Table:
    """Hjelpemetode for 친 generere en tabell i `rich`"""
    table = Table(title="Star Wars Movies")

    table.add_column("Released", justify="right", style="cyan", no_wrap=True)
    table.add_column("Title", style="magenta")
    table.add_column("Box Office", justify="right", style="green")

    table.add_row("Dec 20, 2019", "Star Wars: The Rise of Skywalker", "$952,110,690")
    table.add_row("May 25, 2018", "Solo: A Star Wars Story", "$393,151,347")
    table.add_row("Dec 15, 2017", "Star Wars Ep. V111: The Last Jedi", "$1,332,539,889")
    table.add_row("Dec 16, 2016", "Rogue One: A Star Wars Story", "$1,332,439,889")

    return table


@app.command()
def main(name: str, formal: bool = False) -> None:
    """Si hei til det gitte navnet"""
    if formal:
        console.print(f"Hallo {name} :top_hat:")
    else:
        console.print(f"Hei [bold magenta]{name}[/]!")
    console.print(create_table())


if __name__ == "__main__":
    app()
```

Som man forh친pentligvis ser s친 gir `rich` veldig gode muligheter for 친 gj칮re
programmene, og kommandolinje-verkt칮y, mye mer interaktive og enkle 친 forst친.
